CREATE TABLE IF NOT EXISTS `book` (
  `ID` int(11) NOT NULL,
  `CODE` varchar(20) NOT NULL,
  `TITLE` varchar(200) NOT NULL,
  `DSCP` varchar(2000) DEFAULT NULL,
  `STOCK` int(11) NOT NULL,
  `IS_DEL` varchar(1) NOT NULL DEFAULT 'N',
  `DT_CREATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `CREATE_BY` varchar(50) NOT NULL,
  `DT_UPDATE` timestamp NULL DEFAULT NULL,
  `UPDATE_BY` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Index 2` (`CODE`),
  KEY `CREATE_BY` (`CREATE_BY`),
  KEY `UPDATE_BY` (`UPDATE_BY`),
  CONSTRAINT `CREATE_BY` FOREIGN KEY (`CREATE_BY`) REFERENCES `user` (`USERNAME`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `UPDATE_BY` FOREIGN KEY (`UPDATE_BY`) REFERENCES `user` (`USERNAME`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Data exporting was unselected.
-- Dumping structure for table bookstore.transaction
CREATE TABLE IF NOT EXISTS `transaction` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USERNAME` varchar(50) NOT NULL,
  `BOOK_CODE` varchar(50) NOT NULL,
  `QUANTITY` int(11) NOT NULL,
  `STATUS` varchar(20) NOT NULL,
  `DT_CREATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `USERNAME` (`USERNAME`),
  KEY `BOOK_CODE` (`BOOK_CODE`),
  CONSTRAINT `BOOK_CODE` FOREIGN KEY (`BOOK_CODE`) REFERENCES `book` (`CODE`),
  CONSTRAINT `USERNAME` FOREIGN KEY (`USERNAME`) REFERENCES `user` (`USERNAME`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Data exporting was unselected.
-- Dumping structure for table bookstore.user
CREATE TABLE IF NOT EXISTS `user` (
  `ID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Unique Identifier',
  `USERNAME` varchar(50) NOT NULL COMMENT 'User''s credential to login',
  `PASSWORD` varchar(50) NOT NULL,
  `EMAIL` varchar(50) NOT NULL,
  `USER_TYPE` varchar(20) NOT NULL,
  `DT_CREATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `CREATE_BY` varchar(50) NOT NULL,
  `DT_UPDATE` timestamp NULL DEFAULT NULL,
  `UPDATE_BY` varchar(50) DEFAULT NULL,
  `IS_DEL` varchar(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `USER_USERNAME` (`USERNAME`),
  UNIQUE KEY `USER_EMAIL` (`EMAIL`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Data exporting was unselected.
-- Dumping structure for table bookstore.user_detail
CREATE TABLE IF NOT EXISTS `user_detail` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USERNAME` varchar(50) NOT NULL,
  `ADDR1` varchar(200) NOT NULL,
  `ADDR2` varchar(200) DEFAULT NULL,
  `DOB` timestamp NULL DEFAULT NULL,
  `TEL1` varchar(20) NOT NULL,
  `TEL2` varchar(20) DEFAULT NULL,
  `GENDER` varchar(10) DEFAULT NULL,
  `DT_UPDATE` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK__user` (`USERNAME`),
  CONSTRAINT `FK__user` FOREIGN KEY (`USERNAME`) REFERENCES `user` (`USERNAME`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Data exporting was unselected.
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;